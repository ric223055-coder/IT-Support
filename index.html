<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>IT Support Ticket Form</title>
  <style>
    body, html {
      margin: 0; padding: 0; height: 100%;
      font-family: Arial, sans-serif;
      background-color: #111;
      color: #fff;
      overflow: auto;
    }
    #particles-js {
      position: fixed; width: 100%; height: 100%; z-index: 0;
      top: 0; left: 0;
    }
    .container {
      position: relative; z-index: 1; max-width: 400px;
      margin: 60px auto 80px;
      background: rgba(0,0,0,0.7); padding: 30px;
      border-radius: 10px; box-shadow: 0 0 10px #00c8ff;
    }
    label { display: block; margin: 15px 0 5px; }
    input, select, textarea {
      width: 100%; padding: 8px; border-radius: 4px;
      border: none; font-size: 14px; box-sizing: border-box;
    }
    button {
      margin-top: 20px; background-color: #00c8ff;
      border: none; padding: 10px; width: 100%;
      color: #000; font-weight: bold;
      font-size: 16px; cursor: pointer; border-radius: 5px;
      transition: background-color 0.3s;
    }
    button:hover { background-color: #0099cc; }
    footer {
      position: fixed; bottom: 0; left: 0; width: 100%;
      background: #222; color: #aaa; text-align: center;
      padding: 12px 10px; font-size: 14px;
      box-shadow: 0 -2px 8px rgba(0,0,0,0.6); z-index: 2;
    }
    footer a { color: #00c8ff; text-decoration: none; }
    footer a:hover { text-decoration: underline; }
    .pasted-image {
      max-width: 100%; margin-top: 20px;
      border-radius: 5px; box-shadow: 0 0 8px #00c8ff;
    }
  </style>
</head>
<body>
  <div id="particles-js"></div>

  <div class="container">
    <h1>IT Support Ticket Form</h1>
    <form action="send_ticket.php" method="POST" id="ticketForm" enctype="multipart/form-data">
      <label for="fullname">Full Name:</label>
      <input type="text" id="fullname" name="fullname" required />

      <label for="department">Department / Store:</label>
      <input type="text" id="department" name="department" required />

      <label for="contact">Email or Phone:</label>
      <input type="text" id="contact" name="contact" required />

      <label for="category">Issue Category:</label>
      <select id="category" name="category" required>
        <option value="">-- Select Category --</option>
        <option value="Hardware">Hardware</option>
        <option value="Software">Software</option>
        <option value="Network">Network</option>
        <option value="Foodics POS">Foodics POS</option>
        <option value="Other">Other</option>
      </select>

      <label for="description">Issue Description:</label>
      <textarea id="description" name="description" rows="5" required></textarea>

      <!-- New file upload field -->
      <label for="screenshot">Attach Screenshot / Picture (optional):</label>
      <input type="file" id="screenshot" name="screenshot" accept="image/*" />

      <button type="submit">Submit Ticket</button>

      <!-- Preview container -->
      <div id="pastedImageContainer"></div>
    </form>
  </div>

  <footer>&copy; 2025 All rights reserved. | Website by <a href="#">Ricardo Doroteo</a></footer>

  <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
  <script>
    particlesJS("particles-js", {
      "particles": { "number": { "value": 80, "density": { "enable": true, "value_area": 700 } },
        "color": { "value": "#00c8ff" },
        "shape": { "type": "circle" },
        "opacity": { "value": 0.5 },
        "size": { "value": 3, "random": true },
        "move": { "enable": true, "speed": 2, "out_mode": "out" },
        "line_linked": { "enable": true, "distance": 150, "color": "#00c8ff", "opacity": 0.4, "width": 1 }
      },
      "interactivity": {
        "detect_on": "canvas",
        "events": { "onhover": { "enable": true, "mode": "grab" },
                    "onclick": { "enable": true, "mode": "push" } },
        "modes": { "grab": { "distance": 140, "line_linked": { "opacity": 1 } },
                   "push": { "particles_nb": 4 } }
      },
      "retina_detect": true
    });
  </script>

  <script>
    document.addEventListener('paste', async (e) => {
      const items = e.clipboardData?.items || [];
      for (const item of items) {
        if (item.type.indexOf("image") === 0) {
          const blob = item.getAsFile();
          const img = document.createElement('img');
          img.src = URL.createObjectURL(blob);
          img.className = 'pasted-image';
          document.getElementById('pastedImageContainer').innerHTML = "";
          document.getElementById('pastedImageContainer').appendChild(img);

          // Convert blob to File & inject to file input
          const fileInput = document.getElementById('screenshot');
          const file = new File([blob], "pasted_image.png", { type: blob.type });
          const dataTransfer = new DataTransfer();
          dataTransfer.items.add(file);
          fileInput.files = dataTransfer.files;
          break;
        }
      }
    });
  </script>
</body>
</html>
